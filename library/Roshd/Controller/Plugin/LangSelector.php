<?php/** * @author      Danny Froberg <danny@hackix.com>, Mohammad Ali Akbari <mohamadaliakbari@gmail.com> * @name        Roshd_Controller_Plugin_LangSelector * @filesource  library/Roshd/Controller/Plugin/LangSelector.php * @tutorial    Instantiate in application.ini with; *              resources.frontController.plugins.LangSelector = *              "Roshd_Controller_Plugin_LangSelector" * @desc        Takes the lang parameneter when set either via a *              route or get/post and switches Locale, This depends *              on the main initTranslate function in Bootstrap.php *              to set the initial Zend_Translate object. *              Inspiration from ZendCasts LangSelector. */class Roshd_Controller_Plugin_LangSelector extends Zend_Controller_Plugin_Abstract {    public function preDispatch(Zend_Controller_Request_Abstract $request) {        $registry = Zend_Registry::getInstance();        // Get our translate object from registry.        $translate = $registry->get('Zend_Translate');        // $currLocale = $translate->getLocale();        $langLocale = $request->getParam('language');        $newLocale = new Zend_Locale();        $newLocale->setLocale($langLocale);        $registry->set('Zend_Locale', $newLocale);        $translate->setLocale($langLocale);        // Save the modified translate back to registry        $registry->set('Zend_Translate', $translate);    }}